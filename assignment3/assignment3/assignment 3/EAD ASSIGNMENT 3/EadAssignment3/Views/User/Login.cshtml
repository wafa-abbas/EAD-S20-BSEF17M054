
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
   
}

@section scripts{
    <script>
        $(function () {
            $("#btnLogin").on("click", function () {
                let login = $("#login").val().trim();
                let password = $("#password").val().trim();
                if (login !== "" && password !== "") {
                    var data = new FormData();
                    data.append("Login", login);
                    data.append("Password", password);
                    var settings = {
                        type: "POST",
                        url: "@Url.Content("~/User/ValidateUser")",
                        contentType: false,
                        processData: false,
                        data: data,
                        success: function (response) {
                            if (!response.success) {
                                $("#password").val("");
                                 $("#error").text("Incorrect login or password!");
                                    setTimeout(() => {
                                        const elem = $("#error").text("");
                                     }, 2000);
                                    return false;
                            }
                            else {
                                window.location.href="@Url.Content("~/User/Home")";
                            }
                        },
                        error: function (error) {
                            console.log(error);
                        }
                    };

                    $.ajax(settings);
                }
                else {
                    $("#error").text("Fields are empty!");
                    setTimeout(() => {
                        const elem = $("#error").text("");
                     }, 2000);
                    return false;
                }
              
            });

        });
    </script>
}

@section heading{
    <h2 class="active"> Log In </h2>
}

@section fields{
    <input type="text" id="login" class="fadeIn second" name="login" placeholder="Login ID" />
    <input type="password" id="password" class="fadeIn third" name="password" placeholder="Password" />
    <input type="submit" class="fadeIn fourth" value="Log In" id="btnLogin" />
    <div style="color:red" id="error"></div>
}

@section footer{

    <a class="underlineHover" href="@Url.Content("~/User/SignUp")">Don't have an account?</a>
}
